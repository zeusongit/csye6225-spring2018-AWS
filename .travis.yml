language: node_js
node_js:
  - "9.4.0"

branches:
  only:
    -Lab-6

script:
  - pwd
  - npm install
  - npm test
  - cd ..
  - ls -lrt
  - zip -r csye6225-spring2018.zip csye6225-spring2018 >/dev/null 2>&1
  - ls -lrt

after_success:
  - pwd
  - ls -ltr
  - mkdir codedeploy
  - zip -r csye6225-spring2018-$TRAVIS_JOB_NUMBER.zip csye6225-spring2018 infrastructure/aws/codedeploy/appspec.yml
  - ls -al
  - mv csye6225-spring2018-$TRAVIS_JOB_NUMBER.zip codedeploy/
  - ls -al
  - pwd
  - cd codedeploy
  - ls -al
  - pwd
  - cd ..
  - pwd
  - ls -al

cache:
  directories:
    -node_modules

notifications:
  email:
    on_success: always
    on_failure: always
